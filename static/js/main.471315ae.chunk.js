(this["webpackJsonpproximity-labs-aqi-test"]=this["webpackJsonpproximity-labs-aqi-test"]||[]).push([[0],[,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return i}));var c="SET_HISTORY_DATA",r=function(t){return 0<=t&&t<=50?"green":50<t&&t<=100?"light-green":100<t&&t<=200?"yellow":200<t&&t<=300?"orange":300<t&&t<=400?"red":400<t&&t<=500?"dark-red":""},i=function(t){var e=new Date(t),n=e.getHours(),c=e.getMinutes();return"".concat(n,":").concat(c<10?"0"+c:c,":").concat(e.getSeconds()," ").concat(n>=12?"pm":"am")}},function(t,e,n){"use strict";var c=n(14);n.d(e,"setHistoryObject",(function(){return c.a}));n(10);var r=n(15);n.d(e,"store",(function(){return r.a}));n(16)},,,,,,function(t,e,n){"use strict";var c=n(2),r=n(3),i={historyObject:{}};e.a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case r.a:return Object(c.a)(Object(c.a)({},t),{},{historyObject:e.payload});default:return Object(c.a)({},t)}}},,,,function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var c=n(2),r=n(19),i=n(4),a=n(3),s=function(t){var e,n=i.store.getState().historyObject,s=JSON.parse(JSON.stringify(n)),o=Object(r.a)(t);try{for(o.s();!(e=o.n()).done;){var u,j,b=e.value,l=Object(c.a)(Object(c.a)({},b),{},{timeStamp:Date.now()});10===(null===(u=s[b.city])||void 0===u?void 0:u.length)?(s[b.city].shift(),s[b.city].push(l)):((null===(j=s[b.city])||void 0===j?void 0:j.length)<10||(s[b.city]=[]),s[b.city].push(l))}}catch(d){o.e(d)}finally{o.f()}i.store.dispatch({type:a.a,payload:s})}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var c=n(21),r=n(10),i=Object(c.a)(r.a)},function(t,e){},,,,,,,,,,function(t,e,n){},,,,,function(t,e,n){},,function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var c=n(0),r=n.n(c),i=n(9),a=n.n(i),s=(n(26),n(6)),o=n(2),u=n(20),j=n(8),b=n(17),l=n.n(b),d=n(18),O=n.n(d),f=n(3),h=(n(31),n(1)),y=function(){var t=Object(s.b)((function(t){return t.historyObject})),e=Object(c.useRef)(null),n=Object(c.useState)([]),r=Object(j.a)(n,2),i=r[0],a=r[1],b=Object(c.useState)([]),d=Object(j.a)(b,2),y=d[0],p=d[1];Object(c.useEffect)((function(){a(x())}),[t]),Object(c.useEffect)((function(){for(var e=[],n=0,c=Object.keys(t);n<c.length;n++){var r=c[n];e.push.apply(e,Object(u.a)(t[r].map((function(t){return Object(f.c)(t.timeStamp)}))))}p(e)}),[t]);var x=function(){var e={type:"spline",color:"grey",dashStyle:"Solid",showInLegend:!0,marker:{radius:2}};return Object.keys(t).map((function(n){return Object(o.a)(Object(o.a)({},e),{},{name:n,data:t[n].map((function(t){return t.aqi}))})}))};return Object(h.jsx)("section",{className:"history-chart",children:Object(h.jsx)(O.a,{highcharts:l.a,options:{chart:{type:"line"},title:{text:"Cities with AQI history"},xAxis:{categories:y},yAxis:{title:{text:"AQI (Air quality index)"}},tooltip:{borderColor:"#2c3e50"},plotOptions:{line:{dataLabels:{enabled:!0},enableMouseTracking:!0}},series:i,credits:{enabled:!1}},ref:e})})},p=(n(33),function(t){var e=t.itm;return Object(h.jsxs)("tr",{className:"table-row",children:[Object(h.jsx)("td",{children:e.city}),Object(h.jsx)("td",{className:Object(f.b)(e.aqi),children:e.aqi.toFixed(2)}),Object(h.jsx)("td",{children:new Date(e.timeStamp).toLocaleString().replace(" GMT","")})]})}),x=(n(34),["City","Current AQI","Last Updated"]),v=function(){var t=Object(s.b)((function(t){return t.historyObject})),e=Object.keys(t);return Object(h.jsx)("section",{className:"table",children:Object(h.jsxs)("table",{children:[Object(h.jsx)("thead",{children:Object(h.jsx)("tr",{children:x.map((function(t){return Object(h.jsx)("th",{children:t},t)}))})}),Object(h.jsx)("tbody",{children:e.map((function(e){var n=t[e].length-1,c=t[e][n];return Object(h.jsx)(p,{itm:c},"".concat(c.city,"-").concat(c.aqi))}))})]})})},m=n(4),g=(n(35),function(){var t=function(){var t=Object(c.useState)(),e=Object(j.a)(t,2),n=e[0],r=e[1];return Object(c.useEffect)((function(){var t=new WebSocket("ws://city-ws.herokuapp.com");return r(t),function(){return t.close()}}),[]),n}();return t&&(t.onmessage=function(t){Object(m.setHistoryObject)(JSON.parse(t.data))}),Object(h.jsxs)("div",{className:"home",children:[Object(h.jsx)("header",{children:Object(h.jsx)("h2",{children:"Live City wise AQI Chart (Air Quality Index)"})}),Object(h.jsxs)("main",{className:"body",children:[Object(h.jsx)(v,{}),Object(h.jsx)(y,{})]})]})}),S=(n(36),function(){return Object(h.jsx)(s.a,{store:m.store,children:Object(h.jsx)(g,{})})}),w=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,38)).then((function(e){var n=e.getCLS,c=e.getFID,r=e.getFCP,i=e.getLCP,a=e.getTTFB;n(t),c(t),r(t),i(t),a(t)}))};a.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(S,{})}),document.getElementById("root")),w()}],[[37,1,2]]]);
//# sourceMappingURL=main.471315ae.chunk.js.map